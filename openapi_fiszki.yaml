openapi: '3.1.0'
info:
  version: '1.0.0'
  title: 'Fiszki-Edu API'
  description: System automatycznego generowania i zarządzania fiszkami przy użyciu AI
servers:
  - url: http://localhost:8000
    description: Serwer deweloperski (FastAPI)
paths:
  /auth/register:
    post:
      operationId: Register
      description: Rejestracja nowego użytkownika
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
      responses:
        '201':
          $ref: '#/components/responses/TokenResponse'

  /flashcards/generate:
    post:
      operationId: GenerateFlashcards
      description: Generowanie fiszek przez AI Gemini z podanego tekstu
      security:
        - bearerAuth: []
      tags:
        - Flashcards
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  description: Tekst źródłowy do analizy
              required:
                - text
      responses:
        '200':
          description: Lista wygenerowanych fiszek
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Flashcard'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    UserCreate:
      type: object
      properties:
        username: { type: string }
        email: { type: string, format: email }
        password: { type: string, minLength: 8 }
      required: [username, email, password]
    
    Flashcard:
      type: object
      properties:
        id: { type: integer }
        question: { type: string }
        answer: { type: string }
        topic: { type: string }
        created_at: { type: string, format: date-time }
  responses:
    TokenResponse:
      description: Token dostępu JWT
      content:
        application/json:
          schema:
            type: object
            properties:
              access_token: { type: string }
              token_type: { type: string }